<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <!--  æ”¾å…¥é€™ä¸‰è¡Œé–‹å§‹ -->
    <link
      rel="icon"
      type="image/png"
      href="./icon.png"
    />
    <link
      rel="apple-touch-icon"
      href="./icon.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./icon.png"
    />
    <!--  æ”¾å…¥é€™ä¸‰è¡ŒçµæŸ -->
    <title>å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ (RWDç‰ˆ)</title>
    <style>
      /* --- 1. å…¨åŸŸè¨­å®š --- */
      * {
        box-sizing: border-box; /* è®“å¯¬åº¦åŒ…å« paddingï¼Œé¿å…è·‘ç‰ˆ */
      }

      body,
      html {
        margin: 0;
        padding: 0;
        width: 100%;
        /* ä½¿ç”¨ min-height ç¢ºä¿é«˜åº¦è‡³å°‘å¡«æ»¿è¦–çª— */
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          Helvetica, Arial, sans-serif;
      }

      body {
        /* èƒŒæ™¯åœ–ç‰‡è¨­å®š */
        background: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)),
          url('https://images.unsplash.com/photo-1548199973-03cce0bbc87b?q=80&w=2069&auto=format&fit=crop')
            no-repeat center center;
        background-size: cover;
        background-attachment: fixed; /* è®“èƒŒæ™¯å›ºå®šä¸å‹•ï¼Œå¢å¼·è³ªæ„Ÿ */

        /* æ’ç‰ˆè¨­å®šï¼šFlexbox */
        display: flex;
        align-items: center; /* å‚ç›´ç½®ä¸­ */
        justify-content: flex-end; /* é è¨­ï¼šé›»è…¦ç‰ˆé å³å°é½Š */
        padding-right: 10%; /* é›»è…¦ç‰ˆå³é‚Šè· */
      }

      /* --- 2. å¡ç‰‡ä¸»é«” (æ¯›ç»ç’ƒç‰¹æ•ˆ) --- */
      .card {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        border-radius: 24px;
        padding: 35px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);

        /* å¯¬åº¦è¨­å®š */
        width: 360px;
        max-width: 90%; /* ç¢ºä¿æ‰‹æ©Ÿä¸ç ´ç‰ˆ */

        transition: transform 0.3s ease;
      }

      /* æ¨™é¡Œ */
      h1 {
        font-size: 24px;
        margin: 0 0 25px 0;
        color: #2c3e50;
        font-weight: 800;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      /* --- 3. è¼¸å…¥å€å¡Š --- */
      .input-group {
        margin-bottom: 25px;
      }

      .input-label {
        font-size: 16px;
        color: #444;
        font-weight: 600;
        margin-bottom: 12px;
        display: block;
      }

      input[type='date'] {
        width: 100%;
        padding: 14px; /* åŠ å¤§ Padding æ–¹ä¾¿æ‰‹æ©Ÿé»æ“Š */
        font-size: 16px; /* 16px æ˜¯ iOS é˜²æ­¢ç¸®æ”¾çš„æœ€å°å­—é«” */
        border: 2px solid #e0e0e0;
        border-radius: 12px;
        background-color: rgba(255, 255, 255, 0.9);
        outline: none;
        color: #333;
        appearance: none; /* ç§»é™¤ iOS é è¨­æ¨£å¼ */
        -webkit-appearance: none;
      }

      input[type='date']:focus {
        border-color: #4facfe;
      }

      /* --- 4. æŒ‰éˆ•è¨­å®š --- */
      button {
        width: 100%;
        padding: 14px; /* åŠ å¤§æŒ‰éˆ• */
        font-size: 18px;
        font-weight: 700;
        color: white;
        background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(0, 242, 254, 0.3);
        transition: transform 0.2s, box-shadow 0.2s;
        -webkit-tap-highlight-color: transparent; /* ç§»é™¤æ‰‹æ©Ÿé»æ“Šè—æ¡† */
      }

      button:active {
        transform: scale(0.98); /* æ‰‹æ©Ÿé»æ“Šæ™‚æœ‰ç¸®å°æ•ˆæœ */
      }

      /* --- 5. çµæœé¡¯ç¤ºå€ --- */
      #result-area {
        margin-top: 25px;
        background-color: rgba(230, 242, 255, 0.7);
        padding: 20px;
        border-radius: 16px;
        border-left: 6px solid #4facfe;
        font-size: 15px;
        line-height: 1.6;
        color: #333;
        display: none;
        animation: slideUp 0.5s ease;
      }

      .highlight {
        font-weight: 800;
        font-size: 22px;
        color: #0056b3;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* --- 6. RWD åª’é«”æŸ¥è©¢ (é—œéµéƒ¨åˆ†) --- */

      /* ç•¶è¢å¹•å¯¬åº¦å°æ–¼ 768px (å¹³æ¿/æ‰‹æ©Ÿ) */
      @media (max-width: 768px) {
        body {
          justify-content: center; /* æ”¹ç‚ºç½®ä¸­å°é½Š */
          padding-right: 0;
          padding-left: 0;
          /* é˜²æ­¢éµç›¤å½ˆå‡ºæ™‚èƒŒæ™¯å£“ç¸® */
          background-attachment: scroll;
        }

        .card {
          width: 85%; /* ç¨å¾®ç¸®å°å¯¬åº¦ä½”æ¯” */
          padding: 30px 25px;
        }
      }

      /* ç•¶è¢å¹•å¯¬åº¦å°æ–¼ 480px (å°å°ºå¯¸æ‰‹æ©Ÿ) */
      @media (max-width: 480px) {
        .card {
          width: 92%; /* è®“å¡ç‰‡æ›´å¯¬ä¸€é»ï¼Œå–„ç”¨ç©ºé–“ */
          padding: 25px 20px;
        }

        h1 {
          font-size: 20px; /* æ¨™é¡Œå­—é«”ç¸®å° */
        }

        .highlight {
          font-size: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>ğŸ¶ å¦™éº—æ­²æ•¸è¨ˆç®—æ©Ÿ</h1>

      <div class="input-group">
        <label
          class="input-label"
          for="birthdate"
          >ç‹—ç‹—çš„å‡ºç”Ÿæ—¥æœŸï¼š</label
        >
        <input
          type="date"
          id="birthdate"
        />
      </div>

      <button onclick="calculateAndSave()">é–‹å§‹è¨ˆç®—</button>

      <div id="result-area"></div>
    </div>

    <script>
      // è¨­å®š LocalStorage Key
      const STORAGE_KEY_DATE = 'dogCalculator_v2_date';
      const STORAGE_KEY_RESULT = 'dogCalculator_v2_result';

      document.addEventListener('DOMContentLoaded', () => {
        loadSavedData();
      });

      function loadSavedData() {
        const savedDate = localStorage.getItem(STORAGE_KEY_DATE);
        const savedResult = localStorage.getItem(STORAGE_KEY_RESULT);
        const dateInput = document.getElementById('birthdate');
        const resultArea = document.getElementById('result-area');

        if (savedDate) {
          dateInput.value = savedDate;
        } else {
          dateInput.value = '2023-02-28';
        }

        if (savedResult) {
          resultArea.innerHTML = savedResult;
          resultArea.style.display = 'block';
        }
      }

      function calculateAndSave() {
        const dateInput = document.getElementById('birthdate');
        const resultArea = document.getElementById('result-area');
        const inputDateVal = dateInput.value;

        if (!inputDateVal) {
          alert('è«‹é¸æ“‡æ—¥æœŸï¼');
          return;
        }

        // --- è¨ˆç®—é‚è¼¯ (UCSD ç§‘å­¸å…¬å¼) ---
        const birthDateObj = new Date(inputDateVal);
        const today = new Date();
        const diffTime = today - birthDateObj;

        if (diffTime < 0) {
          resultArea.innerHTML =
            "<span style='color:red;'>âš ï¸ ç‹—ç‹—é‚„æ²’å‡ºç”Ÿå–”ï¼</span>";
          resultArea.style.display = 'block';
          return;
        }

        const exactDogAge = diffTime / (1000 * 60 * 60 * 24 * 365.25);
        const displayDogAge = exactDogAge.toFixed(1);

        let humanAge;
        if (exactDogAge < 1) {
          humanAge = exactDogAge * 15;
        } else {
          humanAge = 16 * Math.log(exactDogAge) + 31;
        }
        const displayHumanAge = humanAge.toFixed(1);

        // --- ç”¢ç”Ÿ HTML çµæœ ---
        const resultHtml = `
                å¦™éº—ç¾åœ¨å¤§ç´„ <span class="highlight">${displayDogAge}</span> æ­²ç‹—å¹´é½¡ï¼Œ<br>
                <hr style="border: 0; border-top: 1px solid rgba(0,0,0,0.1); margin: 12px 0;">
                ä¾æ“š UCSD ç§‘å­¸å…¬å¼æ›ç®—ï¼Œ<br>
                ç”Ÿç†ç‹€æ…‹ç›¸ç•¶æ–¼äººé¡ <span class="highlight">${displayHumanAge}</span> æ­²ã€‚<br>
                <span style="font-size: 12px; color: #777; margin-top: 8px; display:block;">(å·²è‡ªå‹•å„²å­˜çµæœ)</span>
            `;

        // --- é¡¯ç¤ºä¸¦å„²å­˜ ---
        resultArea.innerHTML = resultHtml;
        resultArea.style.display = 'block';

        localStorage.setItem(STORAGE_KEY_DATE, inputDateVal);
        localStorage.setItem(STORAGE_KEY_RESULT, resultHtml);
      }
    </script>
  </body>
</html>
